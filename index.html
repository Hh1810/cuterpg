<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>可愛RPG學習平台</title>
<style>
body {
  font-family: "Helvetica", sans-serif;
  background: #ffeef4;
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}
#app {
  width: 95%;
  max-width: 480px;
  margin-top: 20px;
  background: white;
  padding: 20px;
  border-radius: 20px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
h1 {
  text-align: center;
  color: #ff7fa8;
  margin-bottom: 10px;
}
.level-box {
  background: #fff0f6;
  padding: 15px;
  border-radius: 15px;
  margin-bottom: 20px;
  text-align: center;
}
.task-card {
  background: #fffbfd;
  border: 2px solid #ffd2e6;
  padding: 15px;
  border-radius: 15px;
  margin-bottom: 15px;
}
button {
  width: 100%;
  padding: 12px;
  border: none;
  border-radius: 10px;
  background: #ff9ac2;
  color: white;
  font-size: 16px;
  cursor: pointer;
}
button:hover {
  background: #ff7fa8;
}
.badge {
  display: inline-block;
  background: #ffb5d6;
  padding: 6px 12px;
  border-radius: 20px;
  margin: 4px;
}
</style>
</head>
<body>
<div id="app">
  <h1>可愛RPG學習平台</h1>
  <div class="level-box">
    <p>等級：<span id="level">1</span></p>
    <p>經驗值：<span id="exp">0</span> / 100</p>
  </div>

  <div class="task-card">
    <h3>今日可愛任務</h3>
    <p id="taskText">按下按鈕生成任務 ❤️</p>
    <button onclick="generateTask()">✨ 生成任務（AI）</button>
  </div>

  <div class="task-card">
    <h3>輸入回答</h3>
    <input id="answer" style="width:100%; padding:10px; border-radius:10px; border:1px solid #ffcfe2;" />
    <button style="margin-top:10px;" onclick="submitAnswer()">送出答案</button>
  </div>

  <div class="task-card">
    <h3>獎勵徽章</h3>
    <div id="badges"></div>
  </div>
</div>

<script>
let currentTask = "";
let level = 1;
let exp = 0;
const API_KEY = "AIzaSyA1qz0SSfgtykSctZ35rhLI1IesiSxN4UQ"; // 替換你的金鑰

async function generateTask() {
  const prompt = "生成一個可愛、有趣、簡短的英文或程式學習挑戰。";

  const response = await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=" + API_KEY, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
  });

  const data = await response.json();
  currentTask = data.candidates[0].content.parts[0].text;

  document.getElementById("taskText").innerText = currentTask;
}

function submitAnswer() {
  const userAns = document.getElementById("answer").value.trim();
  if (!userAns) return alert("請輸入答案~");

  gainExp(30);
  addBadge();
  alert("答題成功！你獲得經驗值 +30 ❤️");
}

function gainExp(amount) {
  exp += amount;
  if (exp >= 100) {
    level++;
    exp = exp - 100;
    alert("升級啦！等級提升到 Lv." + level + " ❤️");
  }
  document.getElementById("level").innerText = level;
  document.getElementById("exp").innerText = exp;
}

function addBadge() {
  const badgeBox = document.getElementById("badges");
  const badge = document.createElement("div");
  badge.className = "badge";
  badge.innerText = "可愛挑戰完成 ✨";
  badgeBox.appendChild(badge);
}
</script>
</body>
</html>
